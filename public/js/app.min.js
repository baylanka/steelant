const getBaseUrl=()=>{let e=$('meta[name="base-url"]').attr("content");return"/"!==e.substring(e.length)?e.slice(0,-1):e};let isEmpty=e=>!e||0===e.length||""===e||0===e.length||null===e,makeAjaxCall=(e,t={},n="POST")=>{let r;return r="object"==typeof t?$.param(t):t,new Promise(function(t,s){$.ajax({type:n,url:e,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",enctype:"application/x-www-form-urlencoded",processData:!1,data:r,success:function(e){t(e)},error:function(e,t){let n="";if(0===e.status)n="Not connect.Verify Network.",console.log("Not connect.Verify Network.");else if(404===e.status)console.log("Requested page not found. [404]"),n="Requested page not found";else if(422===e.status){if(console.log("Requested page status. [422]"),e.hasOwnProperty("responseJSON")){n+=e.responseJSON.message;let r=e.responseJSON.hasOwnProperty("errors")?e.responseJSON.errors:null;if(!isEmpty(r)){let o=0;for(let a in r)r.hasOwnProperty(a)&&(n+="<br/>&#9734;&nbsp;"+r[a]),o++}}}else 423===e.status?(console.log("Requested page status. [422]"),e.hasOwnProperty("responseJSON")&&(n+=JSON.stringify(e.responseJSON))):500===e.status?n="Internal Server Error [500].":"parsererror"===t?n="Requested JSON parse failed.":"timeout"===t?n="Time out error.":"abort"===t?n="Ajax request aborted.":e.responseJSON.hasOwnProperty("message")&&"CSRF token mismatch."===e.responseJSON.message?(console.log("CSRF token mismatched, page is reloaded"),location.reload()):n="Uncaught Error.\n"+e.responseText;s(n)}})})},makePostFileRequest=(e,t={})=>{let n=t.hasOwnProperty("data")&&null!=t.data?t.data:new FormData(e[0]),r=t.hasOwnProperty("url")&&null!==t.url?t.url:e.attr("action");return new Promise(function(e,t){$.ajax({type:"POST",url:r,cache:!1,processData:!1,async:!0,encType:"multipart/form-data",dataType:"json",contentType:!1,data:n,success:function(t){e(t)},error:function(e,n){let r="";if(0===e.status)r="Not connect.Verify Network.",console.log("Not connect.Verify Network.");else if(404===e.status)console.log("Requested page not found. [404]"),r="Requested page not found";else if(422===e.status){if(console.log("Requested page status. [422]"),e.hasOwnProperty("responseJSON")){r+=e.responseJSON.message;let s=e.responseJSON.hasOwnProperty("errors")?e.responseJSON.errors:null;if(!isEmpty(s)){let o=0;for(let a in s)s.hasOwnProperty(a)&&(r+="<br/>&#9734;&nbsp;"+s[a]),o++}}}else 500===e.status?r="Internal Server Error [500].":"parsererror"===n?r="Requested JSON parse failed.":"timeout"===n?r="Time out error.":"abort"===n?r="Ajax request aborted.":e.responseJSON.hasOwnProperty("message")&&"CSRF token mismatch."===e.responseJSON.message?(console.log("CSRF token mismatched, page is reloaded"),location.reload()):r="Uncaught Error.\n"+e.responseText;t(r)}})})};toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"2000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};let toast={success:function(e){toastr.success(e)},info:function(e){toastr.info(e)},error:function(e){toastr.error(e)},warning:function(e){toastr.warning(e)}},loadModal=(e,t)=>new Promise(function(n,r){t=`${getBaseUrl()}/${t}`,$("#"+e).load(t,function(t,s,o){let a;"error"!==s?(a=new bootstrap.Modal("#"+e)).show():r(s),n(a)})}),loadButton=(e,t="Submitting...")=>{e.attr("disabled",!0),e.html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> '+t)},resetButton=(e,t="Submit")=>{e.attr("disabled",!1),e.html(t)},getDate=e=>{let t=new Date(e),n=t.getFullYear(),r=Number(t.getMonth())+1,s=t.getDate();return n+"-"+(r=r<10?`0${r}`:r)+"-"+(s=s<10?`0${s}`:s)},validateFile=(e,t=null)=>new Promise((n,r)=>{let s=$(e).val();s&&0!==s.length||n(!0),RegExp("("+t.join("|").replace(/\./g,"\\.")+")$").test(s)?n(!0):r("File not accepted (it seems not an image)")}),spinnerEnabled=()=>{$("#overlay").removeClass("d-none"),$(".spinner-area").html(`
            <div class="spinner-border text-primary" role="status"
                 style="position: fixed; top: 50%; right: 50%; z-index: 2000; width: 4rem; height: 4rem; border-width: 0.5em;">
              <span class="visually-hidden">Loading...</span>
            </div>
                `)},spinnerDisable=()=>{$("#overlay").addClass("d-none"),$(".spinner-area").html("")},isConfirmToProcess=(e,t="warning",n="Are you sure!",r="Confirm",s="Cancel")=>new Promise((o,a)=>{let l={title:n,html:e,showCancelButton:!0,showLoaderOnConfirm:!0,confirmButtonColor:"#1d357c",cancelButtonColor:"#8f9093",confirmButtonText:r,cancelButtonText:s,confirmButtonClass:"btn btn-primary",cancelButtonClass:"btn btn-danger ml-1",buttonsStyling:!0};"favourite"==t?(l.iconHtml='<img src="'+getBaseUrl()+'/public/themes/user/img/star.png" height="80" class="mb-3"/>',l.customClass={icon:"no-border"}):l.icon=t,Swal.fire(l).then(async function(e){e.value?o(!0):o(!1)})});async function imageToBase64(e){return new Promise(t=>{let n=e[0].files;if(n&&n[0]){let r=new FileReader;r.onload=e=>{t(e.target.result)},r.readAsDataURL(n[0])}})}async function getFileType(e){return new Promise((t,n)=>{let r=e.prop("files")[0];t(r?r.type.split("/")[0]:"")})}const toSnakeCase=(e="")=>{let t=e.split(" "),n=t.reduce((e,t)=>e.concat(t.toLowerCase()),[]);return n.join("_")},showManipulatedURLOnDownloadableAnchorTags=()=>{$("a[download]").each(function(){let e=$(this),t=e.attr("download");if(t){let n=getBaseUrl()+"/download/"+encodeURIComponent(t),r=e.attr("href");e.attr("onmouseover",`this.href='${n}';`),e.attr("onmouseout",`this.href='${r}';`),e.attr("onclick",`this.href='${r}';`)}})};